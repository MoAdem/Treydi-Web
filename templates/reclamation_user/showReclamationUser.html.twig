{% extends 'base.html.twig' %}
{% block title %} {{ parent() }}Reclamations {% endblock %}

{% block stylesheets %}
      <!-- Fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com/">
      <link rel="preconnect" href="}https://fonts.gstatic.com/" crossorigin>
      <link href="'https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&amp;display=swap'" rel="stylesheet">

      <!-- Icons -->
      <link rel="stylesheet" href="{{ asset('assets/vendor/fonts/boxicons.css') }}" />
      <link rel="stylesheet" href="{{ asset('assets/vendor/fonts/fontawesome.css') }}" />
      <link rel="stylesheet" href="{{ asset('assets/vendor/fonts/flag-icons.css') }}" />
      <!-- Core CSS -->
      <link rel="stylesheet" href="{{ asset('assets/vendor/css/rtl/core-dark.css') }}" class="template-customizer-core-css" />
      <link rel="stylesheet" href="{{ asset('assets/vendor/css/rtl/theme-default-dark.css') }}" class="template-customizer-theme-css" />
      <link rel="stylesheet" href="{{ asset('assets/css/demo.css') }}" />

      <!-- Vendors CSS -->

      <!-- Core CSS -->
      <link rel="stylesheet" href="{{ asset('assets/vendor/css/rtl/core.css') }}" class="template-customizer-core-css" />
      <link rel="stylesheet" href="{{ asset('assets/vendor/css/rtl/theme-default.css') }}" class="template-customizer-theme-css" />


      <!-- Vendors CSS -->
      <link rel="stylesheet" href="{{ asset('assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css') }}" />
      <link rel="stylesheet" href="{{ asset('assets/vendor/libs/typeahead-js/typeahead.css') }}" />

      <link rel="stylesheet" href="{{ asset('assets/css/plugins.css') }}">
      <link rel="stylesheet" href="{{ asset('assets/css/main.css') }}">

      <!-- Page-Revealer -->
      <script src="{{ asset('assets/js/tg-page-head.js') }}"></script>

      <style>
          .table-responsive {
              overflow-x: auto;
          }
          /* custom css that makes the table cell wrap if the text exceeds the cell length*/
          .table-responsive td {
              white-space: normal;
              text-align: justify;
          }
          ::-moz-selection { /* Code for Firefox */
              background: yellow;
          }

          ::selection {
              background: yellow;
          }
          #chose{
              width:25px;

          }
          /*make the card the width of the screen available*/
      </style>
  {% endblock %}


{% block javascripts %}
    <script src="{{ asset('assets/vendor/js/helpers.js') }}"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="{{ asset('public/assets/vendor/js/template-customizer.js') }}"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="{{ asset('assets/js/config.js') }}"></script>
    <script href={{  "assets/js/vendor/jquery-3.6.0.min.js" }}></script>
    <script src="{{ asset('assets/js/plugins.js') }}"></script>
    <script src="{{ asset('assets/js/ajax-form.js') }}"></script>
    <script src="{{ asset('assets/js/main.js') }}"></script>
    <!-- build:js assets/vendor/js/core.js -->
    <script src="{{ asset('/assets/vendor/libs/jquery/jquery.js') }}"></script>

    <script src="{{ asset('/assets/vendor/libs/popper/popper.js') }}"></script>

    <script src="{{ asset('/assets/vendor/js/bootstrap.js') }}"></script>

    <script src="{{ asset('/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js') }}"></script>

    <script src="{{ asset('/assets/vendor/libs/hammer/hammer.js') }}"></script>

    <script src="{{ asset('/assets/vendor/libs/i18n/i18n.js') }}"></script>

    <script src="{{ asset('/assets/vendor/libs/typeahead-js/typeahead.js') }}"></script>

    <script src="{{ asset('/assets/vendor/js/menu.js') }}"></script>

    <!-- endbuild -->
    <script src="{{asset('/assets/js/maindash.js') }}"></script>
{% endblock %}

{% block body %}
    <div>
        {{ include('front_components/_header-menu-front.html.twig') }}
        <!-- Scroll-top -->
        <button class="scroll__top scroll-to-target" data-target="html">
            <i class="flaticon-right-arrow"></i>
        </button>
        <!-- Scroll-top-end-->

        <!-- breadcrumb-area -->
        <section class="breadcrumb-area breadcrumb__hide-img" data-background="{{ asset('assets/img/bg/breadcrumb_bg02.jpg') }}">
            <div class="container">
                <div class="breadcrumb__wrapper">
                    <div class="row">
                        <div class="col-12">
                            <div class="breadcrumb__content">
                                <h2 class="title"> Table des Reclamations</h2>
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                                        <li class="breadcrumb-item active" aria-current="page">Reclamation</li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- header-search -->
        <div class="search__popup-wrap">
            <div class="search__layer"></div>
            <div class="search__close">
                <span><i class="flaticon-swords-in-cross-arrangement"></i></span>
            </div>
            <div class="search__wrap text-center">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <h2 class="title">... <span>Search Here</span> ...</h2>
                            <div class="search__form">
                                <form action="#">
                                    <input type="text" name="search" placeholder="Type keywords here" required>
                                    <button class="search-btn"><i class="flaticon-loupe"></i></button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- contact-area -->
        <!-- contact-area -->
        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5DDHKGP" height="0" width="0" style="display: none; visibility: hidden"></iframe>
        </noscript>
        <div class="content-wrapper">
            <!-- Content -->
            <div class="container-xxl flex-grow-1 container-p-y">

                {#<hr class="my-5">#}

                <button id="filter-btn" class="btn btn-primary">Filtrer les réclamations</button>
                <br><br>

                <div id="filter-form" style="display: none;">
                    <h1>Filtrer les réclamations</h1>
                    {{ form_start(form,{'attr': {'novalidate': 'novalidate', 'method': 'POST'}} ) }}
                    <div class="form-group">
                        {{ form_label(form.titre_reclamation) }}

                        {{ form_widget(form.titre_reclamation, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <br>
                    <div class="form-group">
                        {{ form_label(form.description_reclamation) }}

                        {{ form_widget(form.description_reclamation, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <br>
                    <div class="form-group">
                        {{ form_label(form.etatReclamation) }}
                        {{ form_widget(form.etatReclamation) }}
                    </div>
                    <br>
                    <div class="form-group">
                        {{ form_label(form.date_creation) }}
                        {{ form_widget(form.date_creation) }}
                    </div>
                    <br>
                    <button type="submit" class="btn btn-primary">Filtrer</button>
                    {{ form_end(form) }}
                </div>

                <script>
                    const filterBtn = document.getElementById('filter-btn');
                    const filterForm = document.getElementById('filter-form');

                    filterBtn.addEventListener('click', () => {
                        filterForm.style.display = filterForm.style.display === 'none' ? 'block' : 'none';
                    });
                </script>
                <br>
                <br>
                {% set urlParams = {
                    'titre': form.titre_reclamation.vars.value,
                    'description': form.description_reclamation.vars.value,
                    'etat': form.etatReclamation.vars.value,
                    'date': form.date_creation.vars.value,
                } %}
                <a href="{{ path('app_pdf_generateUser', urlParams) }}" class="dropdown-item" href="javascript:void(0);"><i class='bx bxs-file-pdf'></i>imprimer Reclamation</a>





                <br>

                <div class="card">
                    <h5 class="card-header">Table des Reclamations</h5>
                    <div class="table-responsive ">
                        <style>
                            .card {

                                background-color:  #2b2c40 !important;


                            }
                            .card td{ color: #a3a4cc ; }

                            .btn{
                                background-color: transparent;
                                color : #a3a4cc;
                            }
                        </style>
                        <div style="position: relative; z-index: 1;">
                            <table class="table " style="z-index: 1">
                                <thead>
                                <tr>
                                    <th>titre </th>
                                    <th>Date </th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>
                                {% for reclamation in list %}
                                    <tbody class="table-border-bottom-0">
                                    <tr>
                                        <td style="white-space: nowrap"><i class='bx bxs-report'></i> <strong>{{ reclamation.titreReclamation }}</strong></td>
                                        <td style="white-space: nowrap">{{ reclamation.dateCreation|date('Y-m-d') }}</td>

                                        <td id="reclamation"><span class="badge bg-label-primary me-1"  style="white-space: normal; text-align: justify;max-width: 800px; overflow-wrap: break-word">{{ reclamation.descriptionReclamation }}</span></td>



                                        <td>
                                            <div class="dropdown" style="position: absolute; z-index: 1000;">
                                                <button style="z-index: 1000 !important;" type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown"><i class="bx bx-dots-vertical-rounded"></i></button>
                                                <div class="dropdown-menu dropdown-menu-end"  style="z-index: 1001">
                                                    <a  href="{{ path('app_reclamationUpdateUser', {'id': reclamation.id}) }}" method="POST" class="dropdown-item" href="javascript:void(0);"><i class="bx bx-edit-alt me-1"></i> Modifier</a>
                                                    <a href="{{ path('app_reclamationUserDelete', {'id': reclamation.id}) }}" method="POST" class="dropdown-item" href="javascript:void(0);"><i class="bx bx-trash me-1"></i> supprimer</a>
                                                    <a href="{{ path('app_reponseUserList', {'id': reclamation.id}) }}" method="POST" class="dropdown-item" href="javascript:void(0);"><i class='bx bx-reply-all'></i> afficher Reponse</a>
                                                    <a href="{{ path('app_pdf_generate_id_user', {'id': reclamation.id}) }}" class="dropdown-item" href="javascript:void(0);"><i class='bx bxs-file-pdf'></i>imprimer cette Reclamation</a>
                                                </div>

                                            </div>

                                        </td>
                                    </tr>
                                    </tbody>
                                {% endfor %}
                            </table>
                        </div>
                    </div>

                </div>

            </div>
        </div>
        <!-- contact-area-end -->
    </div>
        <!-- footer-start -->
        {{ include('front_components/_footer-front.html.twig') }}
        <!-- footer-start-end -->
        <!-- JS here -->

        <!-- 💁 Include both scripts below to support all browsers! -->

        <!-- Loads <model-viewer> for modern browsers: -->
        <script type="module"
                src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
        </script>

        <!-- Loads <model-viewer> for old browsers like IE11: -->
        <script nomodule
                src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js">
        </script>

        <script src="{{ asset('assets/js/vendor/jquery-3.6.0.min.js')  }}"></script>
        <script src="{{ asset('assets/js/plugins.js') }}"></script>
        <script src="{{ asset('assets/js/ajax-form.js') }}"></script>
        <script src="{{ asset('assets/js/main.js') }}"></script>

{% endblock %}